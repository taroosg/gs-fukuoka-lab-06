# PHP基礎

## PHPの記述

PHPは「PHPファイル」に記述する．

### PHPファイルの作成

- 拡張子を「`.php`」にする．
- 例：「`index.php`」「`create.php`」など．

### 開始タグと終了タグ

- 「`<?php`」で始まり「`?>`」で終了（phpしか書かない場合，終了タグは省略可）．
- 開始タグと終了タグの間に書かれた処理がサーバ上で実行される！
- タグ以外の部分（HTMLなど記述した場合）はサーバでは実行されない（そのままソースコードがブラウザに送信される）．

```php
<?php
// ここにPHPの処理を書く
// ...
?>

// ここから下に書いたコードはサーバで実行されない
// （HTMLなどを書く）
```

## 変数と文字列

変数の扱いはJavaScriptと大きく変わらないが，以下の点に注意する．

- 変数名は必ず「`$****`」←$で始めるルール！
- 文字列はシングルクォーテーションかダブルクォーテーションで囲む．
- `$`の次に数字はNG（JavaScriptと同様）．
- `_`などの記号はOK．

```php
// 数値
$number = 100;

// 文字列
$name = 'engineer';

// 数値スタートはNG
$1lang = 'php';

// 後の数字はOK
$lang2 = 'javascript';

// 記号もOK
$_lang = 'Rust';
```

変数と文字列は「`.`」でつなげる．

ダブルクォーテーションを用いる場合は`{}`で変数を埋め込むことができる（JavaScriptの``` `` ```と`${}`に相当）．

```php
$str1 = 'ジーズで' . $lang2 . 'を勉強中！';

// こっちのほうが楽かな．．！
$str2 = "ジーズで{$lang2}を勉強中！";
```

## 配列と連想配列

### 配列

JavaScriptと同様の形式．

データを確認する際には`echo`または`var_dump()`を用いる．

- `echo`で値自体を出力する．
- `var_dump()`では配列などの構造も見られる．
- デバッグの基本は`var_dump()`（JavaScriptの`console.log()`的な）！！！

```php
// 配列
$array = ['JavaScript', 'PHP', 'Rust', 'COBOL'];

// `echo`で画面上にデータを表示できる．
echo $array[2]; // Rust

// 変数や配列の中身や構造を表示
var_dump($array);

```

### 連想配列

連想配列はJavaScriptにおける「オブジェクト」に相当する．

- 「キー」「バリュー」のセット．
- キー名を指定して値を取り出すことができる．

```php
// 連想配列
$array2 = [
  "フロント" => "JavaScript",
  "サーバ" => "PHP",
  "iOS" => "Swift",
  "関数型" => "Haskell"
];

// キー名を指定して値を取り出す
echo $array2['サーバ'];
```

## 条件分岐

条件分岐の構文はJavaScriptと同様．

```php
// 0から1のランダムな数を発生させる
$number = rand(0, 1);

// 1かそれ以外で条件分岐
if ($number == 1) {
  echo '値は1です';
} else {
  echo '値は1以外です';
}

```

条件分岐を使用したおみくじの例

```php
// 1から5の乱数を作成
$random_number = rand(1, 5);

// 乱数の値で条件分岐
if ($random_number == 1) {
  $result =  '大吉';
} elseif ($random_number == ...) {
  $result = ...
} elseif (...) {
  // ...
}
echo $result;

```

## PHPとHTMLの組み合わせ

`echo`で処理結果を出力できるが，ブラウザに値が表示されるだけで気が利いていない．

そこで，PHPとHTMLを組み合わせて画面を作成する機能を利用してみる．

- html内に`<?=変数名?>`と記述することでPHPの変数を埋め込める．
- PHPで処理した結果からHTMLをつくるイメージ．

```php
<?php
// いろいろな処理
$result = '大吉';
?>

// ここからhtmlの記述
<!DOCTYPE html>
  <head>
    // 省略
  </head>
  <body>
    <h1>今日の運勢は<?=$result?>です！</h1>
  </body>
</html>
```

### 💡 Key Point

>PHPとHTMLが動く順序を把握しよう！
>
>1. PHPの処理が実行される．
>2. 処理の結果作成された値がHTMLに埋め込まれ，HTMLが完成する．
>3. HTMLのデータがブラウザに送信される．
>4. ブラウザがHTMLの内容を画面に表示する．

## PHPの練習

`omikuji.php`におみくじの処理を作成し，HTMLと組み合わせて画面に結果を表示しよう．
