# DB の基本

## DB とは

- web 上にデータを保存するためのもの．
- 構造はエクセルなどと対比するとイメージしやすい！
- データを操作するには SQL（言語）を用いる．

## 使い所

- web アプリケーションでデータを保存する場合のほとんど．

### 利用シーンの例

- EC サイトの商品データ（商品名，画像，説明文）
- サービスに登録しているユーザの情報（ユーザ名，アドレス，etc）
- ブログの投稿内容（投稿日時，タイトル，画像，本文，etc）

## DB のデータ構造と概念

エクセルと同様のデータ構造となっている．実際にデータが格納されるのは「テーブル」であり，テーブルをどう設計するかがアプリケーションの根幹となる．

| DB の概念    | エクセルの概念   |
| ------------ | ---------------- |
| データベース | エクセルファイル |
| テーブル     | シート           |
| レコード     | 行               |
| カラム       | 列               |

### 💡 Key Point

> テーブル設計を行う際には，エクセルやスプレッドシートに書き出しながら作業すると視覚的に確認できるのでオススメ．

### データ構造の例

EC サイトの商品データをイメージしたテーブルを下記に示す．

（下記のデーブル構造はまだ改善点があるが，後の講義で解説する．）

|  id | product_name  | price | category | image_url                  |
| --: | ------------- | ----: | -------- | -------------------------- |
|   1 | Laphroaig     |    40 | whisky   | ./images/laphroaig.png     |
|   2 | Ardbeg        |    45 | whisky   | ./images/ardbeg.png        |
|   3 | Caolila       |    50 | whisky   | ./images/caolila.png       |
|   4 | Kilchoman     |    50 | whisky   | ./images/kilchoman.png     |
|   5 | Bowmore       |    45 | whisky   | ./images/bowmore.png       |
|   6 | PortCharlotte |    55 | whisky   | ./images/portcharlotte.png |
| ... | ...           |    .. | ...      | ...                        |

### DB の動き方のイメージ

「サーバ」には 3 種類存在し，相互に連携しながら Web アプリケーションを動作させている．ただし，Web サーバとアプリケーションサーバは区別の概念が難しいため，一旦「DB サーバとそれ以外」という理解で進めてしまって OK．

- 「Web サーバ」：ブラウザにデータを返す．
- 「アプリケーションサーバ」：PHP などのサーバサイド言語を動かす．
- 「DB サーバ」：データを提供する．

ブラウザ，PHP，DB が連携するイメージを以下に示す．

![DBの動き方イメージ](./img/php_crud01_about-db.svg)

### 💡 Key Point

> 処理の流れを把握しよう！
>
> 例えば，PHP と DB を連携させ，保存されているデータを画面に表示する流れは以下のとおりとなる．
>
> 1.  PHP から DB サーバに接続する．
> 2.  DB を操作する SQL を実行し，必要なデータを取得する．
> 3.  取得したデータを HTML 上に反映させ，画面に表示する．
